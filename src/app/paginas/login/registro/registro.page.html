<ion-content class="ion-padding">
  <div class="container">
    <div class="texto">
      <h2>¡Bienvenido!</h2>
      <p>Regístrese para empezar</p>
    </div>
    <div class="login-container">
      <form [formGroup]="form" class="formulario" (ngSubmit)="submit()" (keypress.enter)="submit()">
        <div class="input-container">
          <ion-icon name="person-outline"></ion-icon>
          <ion-input type="text" formControlName="name" placeholder="Nombre"></ion-input>
        </div>
        <div class="validators" *ngIf="form.controls.name.errors && form.controls.name.touched">
          <div class="error-message" *ngIf="form.controls.name.errors?.['required']">El nombre es requerido</div>
          <div class="error-message" *ngIf="form.controls.name.errors?.['minlength']">El nombre debe tener al menos 4 caracteres</div>
        </div>

        <div class="input-container">
          <ion-icon name="mail-outline"></ion-icon>
          <ion-input type="email" formControlName="email" placeholder="Correo"></ion-input>
        </div>
        <div class="validators" *ngIf="form.controls.email.errors && form.controls.email.touched">
          <div class="error-message" *ngIf="form.controls.email.errors?.['required']">El correo es requerido</div>
          <div class="error-message" *ngIf="form.controls.email.errors?.['email']">Ingrese un correo válido</div>
        </div>

        <div class="input-container">
          <ion-icon name="lock-closed-outline"></ion-icon>
          <ion-input
            [type]="showPassword ? 'text' : 'password'"
            placeholder="Contraseña"
            formControlName="password"
          ></ion-input>
          <ion-icon
            [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"
            (click)="togglePasswordVisibility()"
            class="eye-icon"
          ></ion-icon>
        </div>
        <div class="validators" *ngIf="form.controls.password.errors && form.controls.password.touched">
          <div class="error-message" *ngIf="form.controls.password.errors?.['required']">La contraseña es requerida</div>
        </div>

        <div class="input-container">
          <ion-icon name="lock-closed-outline"></ion-icon>
          <ion-input
            [type]="showPassword ? 'text' : 'password'"
            placeholder="Confirma la Contraseña"
            formControlName="confirmPassword"
          ></ion-input>
          <ion-icon
            [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"
            (click)="togglePasswordVisibility()"
            class="eye-icon"
          ></ion-icon>
        </div>
        <div class="validators" *ngIf="form.controls.confirmPassword.errors && form.controls.confirmPassword.touched">
          <div class="error-message" *ngIf="form.controls.confirmPassword.errors?.['required']">La confirmación de la contraseña es requerida</div>
        </div>
        <div class="validators" *ngIf="form.errors?.['passwordMismatch'] && !form.controls.confirmPassword.errors?.['required'] && form.controls.confirmPassword.touched">
          <div class="error-message">Las contraseñas no coinciden</div>
        </div>

        <div class="button-container">
          <ion-button
            class="boton login-btn"
            expand="block"
            fill="clear"
            shape="round"
            type="submit"
            [disabled]="form.invalid"
          >
            <ion-icon name="person-add-outline"></ion-icon>
            Registrarse
          </ion-button>
        </div>
      </form>
      <div class="opciones-container">
        <span class="line"></span>
        <p class="opciones">O registrarse con</p>
        <span class="line"></span>
      </div>
      <div class="social-login">
        <div class="social-buttons">
          <button class="btn-icon facebook" (click)="signUpWithFacebook()">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Facebook_Logo_%282019%29.png/1024px-Facebook_Logo_%282019%29.png" alt="Facebook" />
          </button>
          <button class="btn-icon google" (click)="signUpWithGoogle()">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQQExly8Xk3GWUOkmUGETvVobduKHck3ivnVA&s" alt="Google" />
          </button>
        </div>
      </div>
    </div>
  </div>
</ion-content>
